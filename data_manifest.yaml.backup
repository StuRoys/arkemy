# Arkemy Data Manifest
# This file defines the data sources and their corresponding Parquet files
# Place this file in the project root alongside main.py

# Manifest metadata
manifest_version: "1.0"
currency: "nok"  # Default currency, can be overridden by filename detection
client_id: null  # Optional client identifier for capacity configuration

# Data source definitions
# Each data source maps to a separate Parquet file
data_sources:
  
  # Main timesheet/project data (REQUIRED)
  main:
    file_path: "/data/*time_records*{version}.parquet"
    fallback_path: "~/temp_data/*time_records*{version}.parquet"
    description: "Main timesheet and project data (supports regular/adjusted versions)"
    required: true
    validation_schema: "main"
    # Optional: specify columns to load for performance
    # columns: null  # null = load all columns
  
  # Planned hours data (OPTIONAL) 
  planned:
    file_path: "/data/*planned*{version}.parquet"
    fallback_path: "~/temp_data/*planned*{version}.parquet"
    description: "Planned hours and rates data"
    required: false
    validation_schema: "planned"
    columns: 
      - "record_date"
      - "person_name" 
      - "project_number"
      - "project_name"
      - "planned_hours"
      - "planned_fee"
      - "planned_hourly_rate"
  
  # Person reference data (OPTIONAL)
  person_reference:
    file_path: "/data/person_reference.parquet"
    fallback_path: "data/person_reference.parquet"
    description: "Person metadata and classifications"
    required: false
    validation_schema: "person_reference"
    columns:
      - "Person"
      - "Person type"
  
  # Project reference data (OPTIONAL)
  project_reference: 
    file_path: "/data/project_reference.parquet"
    fallback_path: "data/project_reference.parquet"
    description: "Project metadata and classifications"
    required: false
    validation_schema: "project_reference"
    # Load all columns for project metadata
    columns: null
  
  # Capacity planning data sources (OPTIONAL)
  
  # Raw weekly capacity data from your system
  weekly_source:
    file_path: "/data/weekly_capacity.parquet"
    fallback_path: "data/weekly_capacity.parquet"
    description: "Weekly capacity data from source system"
    required: false
    validation_schema: "weekly_source"
    columns: null
  
  # Pre-transformed schedule data (alternative to weekly_source)
  schedule:
    file_path: "/data/schedule_data.parquet"
    fallback_path: "data/schedule_data.parquet"
    description: "Transformed schedule data in Arkemy format"
    required: false
    validation_schema: "schedule"
    columns: null
  
  # Pre-transformed absence data (alternative to weekly_source)  
  absence:
    file_path: "/data/absence_data.parquet"
    fallback_path: "data/absence_data.parquet"
    description: "Transformed absence data in Arkemy format"
    required: false
    validation_schema: "absence"
    columns: null
  
  # Capacity configuration data
  capacity_config:
    file_path: "/data/capacity_config.parquet"
    fallback_path: "data/capacity_config.parquet"
    description: "Capacity configuration parameters"
    required: false
    validation_schema: "capacity_config"
    columns: null

# File path resolution settings
path_settings:
  # Base directory for relative paths (relative to manifest file location)
  base_directory: "."
  
  # Whether to allow absolute paths
  allow_absolute_paths: true
  
  # Whether to require all files to exist when loading manifest
  require_all_files_exist: false

# Optional metadata
metadata:
  description: "Arkemy analytics data manifest"
  created_date: "2025-08-11"
  data_period_start: null  # Auto-detected from data
  data_period_end: null    # Auto-detected from data
  notes: |
    This manifest defines separate Parquet files for each data source.
    
    Required files:
    - main: Core timesheet/project data
    
    Optional files:
    - planned: Planned hours for forecasting
    - person_reference: Person classifications (employee, contractor, etc.)
    - project_reference: Project metadata and classifications
    - weekly_source: Raw weekly capacity data for transformation
    - schedule/absence: Pre-transformed capacity data
    - capacity_config: Capacity analysis configuration