# ARKEMY Schema - Filtered to match current Python schema
# Fields that correspond to existing data_validation.py schema
# Edit this file to adjust mappings or include additional fields

# Core required fields
required_fields:
  - record_date          # Maps to: Date
  - customer_number      # Maps to: Customer number  
  - customer_name        # Maps to: Customer name
  - project_number       # Maps to: Project number
  - project_name         # Maps to: Project
  - person_name          # Maps to: Person
  - hours_used           # Maps to: Hours worked
  - hours_billable       # Maps to: Billable hours
  - billable_rate_record # Maps to: Hourly rate

# Data types for validation
field_types:
  record_date: date           # datetime in Python
  customer_number: string
  customer_name: string
  project_number: string
  project_name: string
  person_name: string
  person_type: string
  price_model_name: string
  hours_used: float
  hours_billable: float
  billable_rate_record: float
  planned_hours: float        # Maps to: Planned hours
  planned_hourly_rate: float  # Maps to: Planned rate
  planned_fee: float          # Planned fee from ETL
  planned_billable: float     # Planned billable hours
  data_source: string         # Data source identifier

field_mappings:
  "Date": "record_date"
  "Customer number": "customer_number"  
  "Customer name": "customer_name"
  "Project number": "project_number"
  "Project": "project_name"
  "Project type": "project_tag"      
  "Price model": "price_model_type"
  "Phase": "phase_tag"            
  "Activity": "activity_tag"           
  "Person": "person_name"
  "Person type": "person_type"
  "Hours worked": "hours_used"
  "Billable hours": "hours_billable"
  "Hourly rate": "billable_rate_record"
  "Planned hours": "planned_hours"
  "Planned rate": "planned_hourly_rate"
  "Planned billable": "planned_billable"
  "data_source": "data_source"

  "Fee from time record": "fee_record_raw"
  "Cost per hour": "cost_hour" 
  "Cost per time record": "cost_record"
  "Profit per hour": "profit_hour"
  "Profit per time record": "profit_record"

# Fields that need dtype validation (extracted from external system)
# Calculated fields (cost/profit/fee) do not need dtype validation as they're computed post-extraction
external_system_fields:
  - record_date          # From external - needs date validation
  - customer_number      # From external - needs string validation  
  - customer_name        # From external - needs string validation
  - project_number       # From external - needs string validation
  - project_name         # From external - needs string validation
  - person_name          # From external - needs string validation
  - person_type          # From external - needs string validation
  - price_model_type     # From external - needs string validation (mapped from "Price model")
  - project_tag          # From external - needs string validation (mapped from "Project type")
  - phase_tag            # From external - needs string validation (mapped from "Phase")
  - activity_tag         # From external - needs string validation (mapped from "Activity")
  - hours_used           # From external - needs float validation
  - hours_billable       # From external - needs float validation
  - billable_rate_record # From external - needs float validation
  - planned_hours        # From external - needs float validation (mapped from "Planned hours")
  - planned_hourly_rate  # From external - needs float validation (mapped from "Planned rate")

# Calculated fields (no dtype validation needed - computed after extraction)
calculated_fields:
  - planned_fee          # Calculated from ETL processing
  - fee_record           # Calculated from hours * rate
  - cost_per_hour        # Calculated field
  - cost_per_record      # Calculated field
  - profit_per_record    # Calculated field  
  - profit_per_hour      # Calculated field
  - invoice_fee_hour     # Calculated field
  - invoice_fee_hour_index # Calculated field
  - invoice_fee_record   # Calculated field
  - invoice_fee_record_index # Calculated field